# 💎 프리미엄 테스트 가이드 - '리리' 사용자

## 📋 개요
'리리' 닉네임을 가진 사용자를 프리미엄 사용자로 설정하여 프리미엄 태그와 UI를 테스트하는 방법을 설명합니다.

## 🛠️ 테스트 설정 방법

### 1. **앱 실행 및 로그인**
```bash
# 개발 서버 시작
npm start

# 또는 iOS 시뮬레이터에서 실행
npm run ios
```

### 2. **'리리' 닉네임으로 로그인**
- 앱에서 '리리' 닉네임을 가진 계정으로 로그인
- 만약 '리리' 닉네임이 없다면, 온보딩 과정에서 '리리'로 닉네임 설정

### 3. **프리미엄 테스트 설정**
1. **설정 화면으로 이동**
   - 하단 탭에서 '프로필' 탭 클릭
   - 우상단 설정 아이콘 클릭

2. **개발자 테스트 버튼 확인**
   - 설정 화면에서 '앱' 섹션 하단에 다음 버튼들이 표시됩니다:
     - 💎 **프리미엄 테스트 설정** - 리리 사용자를 프리미엄으로 설정
     - ❌ **프리미엄 테스트 제거** - 프리미엄 상태를 일반 사용자로 되돌리기

3. **프리미엄 설정 실행**
   - '프리미엄 테스트 설정' 버튼 클릭
   - 확인 다이얼로그에서 '설정' 선택
   - 성공 메시지 확인

## 🎯 확인할 수 있는 프리미엄 UI 요소들

### **1. 프로필 화면의 프리미엄 배지**
- **위치**: 프로필 화면의 닉네임 우측
- **디자인**: Union.png 이미지 파일 사용
- **스타일**: 
  - **이미지**: 커스텀 디자인된 프리미엄 배지 이미지
  - **크기**: 60x24 픽셀 (컴팩트한 크기)
  - **비율 유지**: `resizeMode: 'contain'`으로 원본 비율 보존
  - **글로우 효과**: 핑크 색상(`#FF0073`)으로 빛나는 효과
  - **자연스러운 효과**: 투명 배경으로 사각형 느낌 제거
  - **위치**: 닉네임과 레벨 배지 사이

### **2. 프리미엄 화면 접근**
- **경로**: 설정 → 프리미엄
- **기능**: 
  - 프리미엄 혜택 소개
  - 가격 플랜 표시
  - 구독 상태 확인

## 🔍 테스트 시나리오

### **시나리오 1: 프리미엄 설정 테스트**
1. '리리' 계정으로 로그인
2. 설정 → 프리미엄 테스트 설정 클릭
3. 확인 다이얼로그에서 '설정' 선택
4. 성공 메시지 확인
5. 프로필 화면에서 닉네임 우측의 Union.png 프리미엄 배지 이미지 확인

### **시나리오 2: 프리미엄 제거 테스트**
1. 프리미엄 상태인 '리리' 계정으로 로그인
2. 설정 → 프리미엄 테스트 제거 클릭
3. 확인 다이얼로그에서 '제거' 선택
4. 성공 메시지 확인
5. 프로필 화면에서 닉네임 우측의 Union.png 프리미엄 배지 이미지 사라짐 확인

### **시나리오 3: 중복 제거 방지 테스트**
1. 이미 일반 사용자인 '리리' 계정으로 로그인
2. 설정 → 프리미엄 테스트 제거 클릭
3. "이미 프리미엄 상태가 아닙니다" 메시지 확인
4. 프리미엄 설정 후 다시 제거 테스트 진행

### **시나리오 4: 다른 사용자 테스트**
1. '리리'가 아닌 다른 계정으로 로그인
2. 설정 화면에서 프리미엄 테스트 설정 클릭
3. "현재 사용자: [닉네임]" 오류 메시지 확인
4. '리리' 계정으로 다시 로그인하여 테스트 진행

## 📊 예상되는 로그 출력

### **프리미엄 설정 시 로그**
```
🔍 프리미엄 테스트 설정 시작: { userId: "a1lNYDm7xseeUKsqF0CuUaZPuDs2", firestore: true }
📄 사용자 문서 참조 생성: users/a1lNYDm7xseeUKsqF0CuUaZPuDs2
📄 사용자 문서 조회 완료: true
👤 사용자 데이터 확인: { nickname: "리리", hasProfile: true, displayName: "리리" }
💎 프리미엄 데이터 설정: { isPremium: true, subscriptionType: "com.runon.app.premium.monthly", ... }
✅ Firestore 업데이트 완료
```

### **프리미엄 제거 시 로그**
```
🗑️ 프리미엄 테스트 제거 시작: { userId: "a1lNYDm7xseeUKsqF0CuUaZPuDs2", firestore: true }
📄 사용자 문서 참조 생성: users/a1lNYDm7xseeUKsqF0CuUaZPuDs2
📄 사용자 문서 조회 완료: true
👤 사용자 데이터 확인: { nickname: "리리", hasProfile: true, displayName: "리리", currentPremiumStatus: true }
🗑️ 프리미엄 데이터 제거: { isPremium: false, subscriptionType: null, ... }
✅ Firestore 업데이트 완료
```

## 📊 프리미엄 상태 데이터 구조

### **Firestore에 저장되는 프리미엄 데이터**
```javascript
{
  isPremium: true,
  subscriptionType: 'com.runon.app.premium.monthly',
  purchaseDate: '2024-01-01T00:00:00.000Z',
  transactionId: 'TEST_1704067200000',
  originalTransactionId: 'TEST_1704067200000',
  expiresDate: '2024-01-31T00:00:00.000Z', // 30일 후
  isActive: true
}
```

### **프리미엄 상태 확인 방법**
```javascript
// PremiumContext에서 제공하는 상태
const { isPremium, subscriptionType, expiresDate } = usePremium();

// 사용 예시
if (isPremium) {
  console.log('프리미엄 사용자입니다!');
  console.log('구독 타입:', subscriptionType);
  console.log('만료일:', expiresDate);
}
```

## 🐛 문제 해결

### **문제 1: 프리미엄 태그가 표시되지 않음**
- **원인**: 프리미엄 상태가 제대로 업데이트되지 않음
- **해결**: 앱을 완전히 종료하고 다시 시작

### **문제 2: 테스트 버튼이 보이지 않음**
- **원인**: 개발 환경이 아닌 프로덕션 환경에서 실행
- **해결**: `__DEV__`가 `true`인지 확인

### **문제 3: '리리'가 아닌 사용자 오류**
- **원인**: 현재 로그인된 사용자의 닉네임이 '리리'가 아님
- **해결**: '리리' 닉네임으로 로그인하거나 닉네임 변경

### **문제 4: 프리미엄 제거 시 오류**
- **원인**: 이미 일반 사용자 상태에서 제거 시도
- **해결**: "이미 프리미엄 상태가 아닙니다" 메시지 확인 후 프리미엄 설정부터 진행

### **문제 5: 프리미엄 태그가 사라지지 않음**
- **원인**: PremiumContext 상태가 업데이트되지 않음
- **해결**: 앱을 완전히 종료하고 다시 시작하거나, 프리미엄 설정 후 다시 제거 시도

## 📱 스크린샷 가이드

### **프리미엄 설정 전**
- 프로필 화면: 일반 사용자 UI (프리미엄 배지 없음)

### **프리미엄 설정 후**
- 프로필 화면: 닉네임 우측에 Union.png 프리미엄 배지 이미지 표시

## 🔄 테스트 완료 후 정리

### **프리미엄 상태 제거**
1. 설정 → 프리미엄 테스트 제거 클릭
2. 확인 다이얼로그에서 '제거' 선택
3. 일반 사용자 상태로 복원 확인

### **데이터 정리**
- 테스트용 프리미엄 데이터는 자동으로 제거됨
- 실제 사용자 데이터에는 영향 없음

## 📞 지원

### **개발자 문의**
- 이슈 발생 시: 개발팀에 문의
- 로그 확인: 콘솔에서 에러 메시지 확인

### **테스트 완료 체크리스트**
- [ ] '리리' 계정으로 로그인 성공
- [ ] 프리미엄 테스트 설정 성공
- [ ] 닉네임 우측에 Union.png 프리미엄 배지 이미지 표시 확인
- [ ] 프리미엄 화면 접근 가능 확인
- [ ] 프리미엄 테스트 제거 성공
- [ ] 닉네임 우측에서 Union.png 프리미엄 배지 이미지 사라짐 확인
- [ ] 일반 사용자 상태로 복원 확인
- [ ] 중복 제거 방지 기능 확인
- [ ] 다른 사용자 접근 제한 확인

---

**마지막 업데이트**: 2024년 1월
**테스트 환경**: 개발 환경 (__DEV__ = true)
