# 대기질 데이터 구조 가이드

## 한국환경공단 API 응답 구조

### 기본 응답 형식
- API 엔드포인트: https://apis.data.go.kr/B552584/ArpltnInforInqireSvc
- 응답 형식: JSON
- 인증: API 키 필요

### 데이터 필드 설명
- stationName: 측정소명 (예: "강남구", "서초구")
- dataTime: 측정시간 (YYYY-MM-DD HH:mm 형식)
- pm10Value: 미세먼지(PM10) 농도 (μg/m³)
- pm25Value: 초미세먼지(PM2.5) 농도 (μg/m³)
- o3Value: 오존 농도 (ppm)
- no2Value: 이산화질소 농도 (ppm)
- coValue: 일산화탄소 농도 (ppm)
- so2Value: 이산화황 농도 (ppm)

## AQI 레벨 분류

### 등급별 분류
- 좋음 (0-50): 초록색, 야외 활동에 적합
- 보통 (51-100): 노란색, 민감군은 주의
- 나쁨 (101-150): 주황색, 마스크 착용 권장
- 매우나쁨 (151-200): 빨간색, 외출 자제
- 위험 (201+): 보라색, 외출 피함

### 색상 코드
- 좋음: #00E400 (초록색)
- 보통: #FFFF00 (노란색)
- 나쁨: #FF7E00 (주황색)
- 매우나쁨: #FF0000 (빨간색)
- 위험: #8F3F97 (보라색)

## 앱에서의 데이터 활용

### 1. 홈 화면
- 현재 위치의 AQI 수치 표시
- 프로그레스바로 시각적 표현
- 건강영향 권장사항 제공

### 2. 러닝 추천 카드
- 날씨 컨디션 태그에 대기질 정보 반영
- 대기질 기반 러닝 권장 여부 결정

### 3. 알림 시스템
- 대기질이 나쁠 때 사용자에게 알림
- 실외 활동 제한 권고

## 데이터 처리 로직

### AQI 계산
1. PM2.5 농도로 AQI 계산
2. PM10 농도로 AQI 계산
3. 두 값 중 더 높은 값을 최종 AQI로 사용

### 레벨 판정
- 계산된 AQI 값으로 등급 판정
- 등급에 따른 색상 및 권장사항 매핑

### 업데이트 주기
- 1시간마다 새로운 데이터 요청
- 사용자 위치 변경 시 즉시 업데이트
- 네트워크 오류 시 이전 데이터 유지

## 오류 처리

### API 호출 실패
- 이전 데이터 유지
- 사용자에게 상태 안내
- 재시도 로직 구현

### 데이터 유효성 검사
- 농도값 범위 확인
- 측정시간 유효성 검사
- 필수 필드 존재 여부 확인
